# WinNote
Organizer (not finished)

Содержание

Тематическое задание  ….…………………………………………………………  3
Введение  …………………………………………………………………………...  4
Глава 1  - Предисловие об использованных технологиях платформы .NET Framework …………………….   6
Глава 2 - Регистрация и авторизация …………………………………………….   7
Глава 3 - Календарь  ………………………………………………………………   9
Глава 4 - Создание событий  ……………………………………………………..   10
Глава 5 - Работа с базами данных  ……………………………………………….   13
Вывод  ……………………………………………………………………………...   16
Литература ………………………………………………………………………...    17














Тематическое задание
1.	Предисловие об использованных технологиях платформы .NET Framework
2.	Регистрация и авторизация
2.1.	 Проверка корректности ввода полей авторизации и регистрации
2.2.	 Регистрация и авторизация пользователя

3.	Календарь
3.1.	 Календарь текущей даты
3.2.	 Просмотр дат и смена даты при изменении текущей даты

4.	Создание событий
4.1.	 Создание событий (отображение в закладках)
4.2.	 Удаление и изменение событий
4.3.	 Оповещение событий
4.4.	 Настройка событий
4.4.1.	Настройка повторяющихся событий
4.4.1.1.	ежедневное повторение
4.4.1.2.	повторение по будним дням
4.4.1.3.	повторение по выбору пользователя (дней недели)
4.4.1.4.	ежемесячное оповещение
4.4.1.5.	ежегодное оповещение

4.4.2.	Настройка предварительного оповещения
4.4.2.1.	Оповещение – за пять минут
4.4.2.2.	Оповещение – за час
4.4.2.3.	Оповещение – за день
4.4.3.	Задание времени оповещения

5.	Работа с базами данных
5.1.	 Создание пользователей и дальнейшая работа с ними
5.2.	 Создание событий
5.2.1.	Изменение событий
5.2.2.	Удаление событий
5.2.3.	При изменении или удалении – сохранение информации о выполненных действиях (при отсутствии интернет соединения).



Введение

Приступая к построению тематического задания, было желание реализовать проект с удобным для пользователя интерфейсом и функциональным построением, который не будет заставлять пользователя думать о том, как ему работать с данной программой или какие возможности этой программы.
Функциональность может показаться не богатой по сравнению с аналогичными программами, но ее достаточно для программы данного класса. Расширенный функционал и нагромождённое пользовательское меню не позволит пользователю с легкостью ориентироваться в интерфейсе и без выработанной привычки работать с приложением. Так же, недостаточный функционал не будет полезен для управления, к примеру, своими финансами или тех же заметов в календаре.
Основным преимуществом программы является простота и легкость в использовании. Удобный и красочный интерфейс программы «WinNote» обеспечит более удобную работу. 
Можно создавать неограниченное количество записей и пользователей: это может быть полезно для ведения записей на одном и том же пользовательском компьютере нескольким пользователям. Единственным ограничением в создании нового пользователя является обязательное подключение к сети интернет. Это сделано для избежания  совпадения имен при авторизации и случайного распространения личных данных среди других пользователей. Не смотря на то, что при регистрации необходимо подключение к сети интернет – повторная авторизация (на не переустановленной программе) не требует дальнейшего активного подключения к сети. В дальнейшем подключение к сети интернет рекомендуемо лишь для создания резервных копий записей. Все данные сугубо конфиденциальны и не могут быть переданы в пользование другим пользователям.
В программе позволяет удобно создавать напоминания: как с предварительным оповещением, так и без оповещения. Предварительное оповещение настраивается в зависимости от желания пользователя.
В аналоговых программах напоминания теряют свою активность в момент их достижения. С программой WinNote об этом можно забыть. WinNote позволяет создать повторяемость напоминаний: в повторяющемся напоминании можно указать – каждый день, каждый будний день, каждый месяц, каждый год (как например дни рождения или подобные праздники). А при выборе напоминания каждую неделю, можно также установить удобные для пользователя дни недели, в которые будут всплывать напоминания. В случае, когда WinNote будет включен уже после указанного времени, WinNote в обязательном порядке оповестит пользователя об этом.
Для удобства просмотра и заполнения органайзер распределен на четыре визуальные части. 
Первая: «День» - в дне можно выбрать время (от и до). Такая реализация удобна в случае ежедневного планирования своего времени. Если необходимо указать более точное время события – это возможно сделать в выплывающем окне (Меню создания события).
Вторая: «Неделя»  - неделя удобна, когда необходимо не только планировать свое время, но и просматривать события предыдущих и следующих дней. 
Третья: «Месяц» - удобно, когда нет частой необходимости создавать новые события, а так же удалять и редактировать их.
Четвертая: «Расписание» - в расписании легко найти нужное событий и перейти к нему для редактирования или удаления.
Часто бывают ситуации, когда отсутствует интернет соединение. В таком случае WinNote осуществит все произведенные изменения после появления соединения с интернетом.
Если будет необходимость установить программу на другом компьютере или переустановить текущую программу – WinNote обновит все данные без их потери.








 
Глава 1
Предисловие об использованных технологиях платформы .NET Framework
В приложении WinNote использованы следующие технологии:
•	WPF - это система следующего поколения для построения клиентских приложений Windows с визуально привлекательными возможностями взаимодействия с пользователем. С помощью WPF можно создавать широкий спектр как автономных, так и размещенных в браузере приложений. На следующем рисунке показан пример одного из таких приложений Contoso Healthcare Sample Application.

•	ADO.NET - это набор классов, предоставляющих службы доступа к данным программистам, которые используют платформу .NET Framework. ADO.NET имеет богатый набор компонентов для создания распределенных приложений, совместно использующих данные. Это неотъемлемая часть платформы .NET Framework, которая предоставляет доступ к реляционным данным, XML-данным и данным приложений. ADO.NET удовлетворяет различные потребности разработчиков, включая создание клиентских приложений баз данных, а также бизнес-объектов среднего уровня, используемых приложениями, средствами, языками и браузерам.

•	ADO.NET: SQL Server. 
Объект System.Data.SqlClient предоставляет доступ к версиям SQL Server и инкапсулирует протоколы для конкретных баз данных. Возможности поставщика данных похожи на возможности поставщиков данных .NET Framework для OLE DB, ODBC и Oracle. Объект System.Data.SqlClient включает средство синтаксического анализа потока табличных данных, которое служит для непосредственного взаимодействия с SQL Server.

•	Entity Framework. 
Платформа Entity Framework представляет собой набор технологий ADO.NET, обеспечивающих разработку приложений, связанных с обработкой данных. Архитекторам и разработчикам приложений, ориентированных на обработку данных, приходится учитывать необходимость достижения двух совершенно различных целей. Они должны моделировать сущности, связи и логику решаемых бизнес-задач, а также работать с ядрами СУБД, используемыми для сохранения и получения данных. Данные могут распределяться по нескольким системам хранения данных, в каждой из которых применяются свои протоколы, но даже в приложениях, работающих с одной системой хранения данных, необходимо поддерживать баланс между требованиями системы хранения данных и требованиями написания эффективного и удобного для обслуживания кода приложения. 
Entity Framework позволяет работать с данными в форме специфических для домена объектов и свойств, таких как клиенты и их адреса, без необходимости обращаться к базовым таблицам и столбцам базы данных, где хранятся эти данные. Entity Framework дает разработчикам возможность работать с данными на более высоком уровне абстракции, создавать и сопровождать приложения, ориентированные на данные, используя меньше кода, чем в традиционных приложениях. Поскольку Entity Framework является компонентом .NET Framework, приложения Entity Framework могут работать на любом компьютере, где установлена платформа .NET Framework, начиная с версии 3.5 с пакетом обновления 1 (SP1).

•	C# Patterns: singleton, MVC.


Глава 2
2. Регистрация и авторизация
2.1. Проверка корректности ввода полей авторизации и регистрации
 
1.	Страница регистрации

Корректный ввод данных в поля на панелях авторизации и регистрации производятся в классах реализующих события. При введении некорректных данных поля содержащие ошибку подсвечиваются красной рамкой для оповещения пользователя, что данные не корректно введены. Как показано на рисунке 2.

 
	2. Страница авторизации

2.2.	Регистрация и авторизация пользователя.
Панели авторизации и регистрации являются WPF User Control-ами. Для уменьшения связи между User Control-ами, все передачи данных производятся через события (event). Все события отделены от остальных проектов в отдельный проект «Class Library», который называется EventLibraries. 
 
3. Классы связанные с регистрацией и авторизацией в проекте WinNote

После того, как пользователь ввел все данные корректно и нажал кнопку «Войти» (или в случае панели регистрации, кнопку «Регистрация») через событие отправляются данные в проект WinNote: в класс «LoginRegisterEvent». Из класса «LoginRegisterEvent» идет обращение в класс «EntityData». 
    Класс «EntityData» - это класс, который осуществляет соединение с локальной базой данных .NET Entity Framework.
   В локальной базе данных (далее БД) ведется поиск данных, которые ввел пользователь. Это помогает избежать лишнего соединения с внешней БД SQL Server, через платформу ADO.NET. Если данные в локальной БД отсутствуют, тогда из класса LoginRegisterEvent данные введенные пользователем передаются в класс WorkWithSQLData. 
    WorkWithSQLData – это класс предназначенный для работы с внешней БД через платформу ADO.NET. 
    В классе WorkWithSQLData отправляется запрос на сервер на наличие данных введенных пользователем. В случае положительного результата, данные вносятся в локальную БД. После чего идет загрузка с внешнего сервера в локальную БД всех данных раннее хранящихся на внешнем сервере. В случае отрицательного результата пользователь уведомляется о некорректно введенных данных. 
После авторизации передается событие в класс «View» и маленькое окно меняет свой размер в полноэкранное окно, а основная логика управления переходит к классу «MainView».

Глава 3
3. Календарь
3.1  Календарь текущей даты.
    Календарь реализован на платформе WPF. Календарь разделен на шесть недель. Такое разделение сделано для правильного и полного отображения чисел в отображаемом месяце: месяц может начинаться как с понедельника, так и с воскресенья, а количество дней может быть до тридцати одного. Если отображаемый месяц не захватывает шестую неделю, тогда она скрывается от пользователя. 

3.2  Просмотр дат и смена даты при изменении текущей даты
    Текущая дата также отображается на календаре в виде зеленого круга, а выбранная дата отображается на календаре в виде синего круга. При нажатии на дату осуществляется переход на панель «День» (если текущая панель не является на дне) и отображает все события введенные пользователем на текущий день.
    Над календарем находятся две кнопки (по правую и левую стороны от названия месяца) при нажатии на которые меняется отображение месяца.
 
                  5. Календарь
Все визуальные отображения, связанные с календарем, происходят внутри User Control-а «CalendarLibrary».

Глава 4

4.	Создание событий
4.1. Создание событий (отображение в закладках)
Создание событий возможно с трех панелей Grid: день, неделя, месяц, а также через кнопку «Создать событие» 
    В панели день пользователь может выделить курсором нужное время, при зажатии обрабатывается событие выделения, а при отпускании событие выделения заканчивается. После чего выделенное время передается через событие в User Control под названием CalendarAddMenu_UserControl. 
   CalendarAddMenu_UserControl – это Control с помощью, которого можно создать событие, после чего его можно увидеть на панелях календаря.
В панели неделя выделение идентично, но с ограничением в одном дне. 
   В панели месяц выделение отсутствует, вместо этого событие можно создать с помощью нажатия левой клавиши мыши в нужной ячейке даты.  

4.2.	 Удаление и изменение событий
    Удаление возможно только с трех панелей: день, неделя, месяц. При наведении на панель выскакивает всплывающее окно popup menu, в котором отображается основная информация о событии: название, время, место положения, описание. Дополнительно отображаются две пользовательские кнопки: изменить и удалить. 
 
6. Создание и изменение события
При нажатии кнопки удалить, событие удаляется без подтверждения пользователя. При нажатии кнопки изменить появляется панель с уже введенными данными для изменения. Как показано на рис. 7
 
7. Панель создания и изменения события

4.3.	 Оповещение событий
    Оповещение событий происходит с помощью класса NotifyIcons. В классе «NotifyIcons» все события происходят в потоке Task для того, чтобы вся проверка не загружала программу ежеминутным выполнением проверок наличия событий. Все оповещения происходят с помощью NotifyIcons.BalloonsIconMenu с звуковым рингтоном.

4.4.	 Настройка событий
4.4.1.	Настройка повторяющихся событий
4.4.1.1.	Ежедневное повторение
   Ежедневное повторение позволяет пользователю установить событие, которое будет повторяться ежедневно.
4.4.1.2.	повторение по будним дням
    Повторение по будним дням позволяет пользователю установить повторяющееся событие с понедельника по пятницу.
4.4.1.3.	повторение по выбору пользователя (дней недели)
    Повторение «каждую неделю» - позволяет пользователю самому выбрать дни недели, в которые будет повторяться событие.
4.4.1.4.	ежемесячное оповещение
    Повторение «каждый месяц» позволяет пользователю создать событие, которое будет повторяться каждый месяц определенного числа.
4.4.1.5.	ежегодное оповещение
    Повторение «каждый год» удобно для пользователя, чтоб установить событие о ежегодных праздниках, днях рождения и т.д. 

4.4.2.	Настройка предварительного оповещения
4.4.2.1.	Оповещение – за пять минут
    Оповещение будет за пять минут до начала текущего события
4.4.2.2.	Оповещение – за час
    Оповещение будет за один час до начала текущего события
4.4.2.3.	Оповещение – за день
    Оповещение будет за один день до начала текущего события

4.4.3.	Задание времени оповещения
     Пользователь может сам настроить дату и время события, которое будет отображаться на панелях.

Глава 5
5.	Работа с локальной базой данных

5.1.	Создание пользователей и дальнейшая работа с ними
    Все пользователи создаются в локальной БД и при активном подключении к Интернету, сохраняются на внешней БД. При выходе пользователя из программы нет необходимости в соединении с внешней БД, так как все данные сохраняются в локальной БД.    
5.2.	 Создание событий
 Создание событий требует нескольких классов событий выполняющихся последовательно, а именно при выделении в панели день отсылается событие в проект WinNote (в класс MainView). Считывается активная панель. Передается в классы EntityData и WorkWithSQLData, где происходят сохранения событий  в базах данных. После чего, идет рассылка всем подписчикам (с перечислением активной панели «enum») обновленных событий, которые заново отображаются пользователю. Классы которые захватывают создание, изменение и удаление событий указаны на рис. 8

5.2.1.	Изменение событий
    Изменение событий происходит по такому же принципу как и создание событий. 
5.2.2.	Удаление событий
    Изменение событий происходит по такому же принципу как и создание событий. 
 
8. Классы панели добавления события
5.2.3.	При изменении или удалении – сохранение информации о выполненных действиях (при отсутствии интернет соединения)
    Если отсутствует соединение с Интернетом все изменения (создания, изменение, удаление) заносится в базу данных с указанием того события, которое произошло. После этого включается таймер, который проверяет активное подключение к Интернету.  Когда появляется активное подключение к Интернету – запускается цикл, в другом потоке (Task), который начинает выполнять все события, которые произошли за время отсутствия связи с Интернетом. В случае если в таблице находятся незавершенные задачи для внешнего сервера – они будут запущены тем, же таймером при следующем включении программы.
 
Вывод
Цель данного проекта – создание полноценного органайзера, для помощи в планировании и распределении времени, средств и возможность добавления заметок. 
В  процессе работы приобрел навыки коллективной разработки и углубил свои знания по пройденному материалу, так как использовал следующие технологии: WPF, ADO.NET, Entity Framework, паттерны проектирования MVC, Singletone и многопоточность. 
Считаю, что цель достигнута - программа работает и выполняет свои основные функции, такие как: 
•	Календарь. Возможность добавлять напоминания и использовать рабочее пространство программы, как планинг. У пользователя есть возможность выбрать нужный и удобный вид интерфейса в данный момент (день, неделя, месяц)

•	Блокнот. В данном разделе, реализована возможность добавлять быстрые заметки с возможностью редактирования текста (шрифт, кегль, цвет, начертание)

•	Кошелек. Этот раздел программы помогает пользователю вести учет личных финансов. Реализована возможность добавлять доходы и растраты. 
 
Литература:

MSDN - https://msdn.microsoft.com/ru-ru/library/aa970268(v=vs.110).aspx
     https://msdn.microsoft.com/ru-ru/library/e80y5yhx(v=vs.110).aspx
     https://msdn.microsoft.com/ru-ru/library/kb9s9ks0(v=vs.110).aspx
А.Шевчук Design Patterns Via C# - 2015
Spravkaweb -  http://www.spravkaweb.ru/mysql/sql/vartype
		http://www.spravkaweb.ru/mysql/sql/select
GitHub - https://gist.github.com/hansmaad/9187633
Stackoverflow - http://stackoverflow.com/questions/13684355/wpf-checkbox-style-change
